---
- name: override defaults
  set_fact:
    _dockered_nexus:
      version: "{{ dockered_nexus.version | default(_dockered_nexus_defaults.version) }}"
      network_mode: "{{ dockered_nexus.network_mode | default(_dockered_nexus_defaults.network_mode) }}"

- name: run nexus:{{ _dockered_nexus.version }}
  docker_container:
    name: nexus
    image: "sonatype/nexus3:{{ _dockered_nexus.version }}"
    state: started
    restart_policy: unless-stopped
    network_mode: "{{ _dockered_nexus.network_mode }}"
  # 'become: true' as work around for https://github.com/ansible/ansible/issues/20604
  become: true
