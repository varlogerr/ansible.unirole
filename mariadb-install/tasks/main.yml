---
- include_vars: "{{ xfacts.distro.osfamily }}.yml"
- include_tasks: "add-repo-{{ xfacts.distro.osfamily }}.yml"

- block:
  - name: install mariadb client
    package: name="{{ mariadb_package_client_name }}" state=present
    when: mariadb_install_client

  - block:
    - name: install mariadb server
      package: name="{{ mariadb_package_server_name }}" state=present

    - set_fact:
        _mariadb_server_installed: true

    - name: start mariadb
      service: name=mysql state=started enabled=yes
    when: mariadb_install_server
  become: true
